
@{
    ViewBag.Title = "Index";
}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.min.js"></script>


<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<link rel="stylesheet" href="~/Scripts/libs/waitMe/waitMe.min.css" />
<link rel="stylesheet" href="~/Scripts/libs/waitMe/waitMe.css" />
<script src="~/Scripts/libs/waitMe/waitMe.min.js"></script>

<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

<style>
    #map_container {
        position: relative;
    }

    #map {
        height: 0;
        overflow: hidden;
        padding-bottom: 40.25%;
        padding-top: 30px;
        position: relative;
    }

</style>
<div id="content">

    <div class="row">
        <div class="col-sm-12">
            <section id="widget-grid" class="">
                <div class="row">
                    <article class="col-sm-12 col-md-12 col-lg-12">
                        <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-close="false" data-widget-custombutton="false">
                            <header draggable="true">
                                <span class="widget-icon"> <i class="fa fa-map-marker"></i></span>
                                <h2>Click en el cajero para ver la descripci&oacute;n</h2>
                            </header>
                            <div>

                                <div class="widget-body no-padding">
                                    <fieldset>
                                        @*<div id="floating-panel">
                                            <label>Mapa de Calor:</label>
                                            <input onclick="toggleHeatmap()"
                                                   type="checkbox"
                                                   value="true"
                                                   checked="checked" />
                                        </div>*@
                                        <div class="row">
                                            <div class="col-sm-12">


                                                <div id="map_container"></div>
                                                <div id="map"></div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </section>

        </div>
    </div>
</div>
@section pagespecific {
    <script>

        a = 0;

        var map;
        //var heatmap;
            var opcion = 0;
        var MyMarker=null;
        function geoLocation(map) {
            var infoWindow = new google.maps.InfoWindow({map: map });
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    infoWindow.setPosition(pos);
                    infoWindow.setContent('Posici&oacute;n actual');
                    map.setCenter(pos);
                }, function () {
                    handleLocationError(true, infoWindow, map.getCenter());
                });
            } else {
                // Browser doesn't support Geolocation
                handleLocationError(false, infoWindow, map.getCenter());
            }
        }

        function initMap() {

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: {lat: -0.173689784, lng: -78.49555141 },
            });


            map.addListener('click', function (e) {
                placeMarkerAndPanTo(e.latLng, map);
            });

        }

        function placeMarkerAndPanTo(latLng, map) {

            

            if (MyMarker != null) {
                MyMarker.setMap(null);
            }

            var markerNuevo = new google.maps.Marker({
                position: latLng,
                map: map,
            });

            MyMarker = markerNuevo;

            map.panTo(latLng);

        }


    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBIBkXjci-D1Gog6Ez_BkpJcdtEnO1XsBA&libraries=visualization&callback=initMap"
            async defer></script>

}

